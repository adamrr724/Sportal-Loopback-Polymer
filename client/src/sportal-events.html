
<link rel="import" href="../bower_components/polymer/polymer.html">

<dom-module id="sportal-events">

    <template>

        <style>
            :host {
                display: block;
                padding: 10px;
            }

        </style>
        <template is="dom-if" if="{{signedIn}}">
            <iron-ajax id="userEventGet"
                       auto
                       url="{{getUserEventById}}"
                       handle-as="json"
                       on-error="_onError"
                       on-response="_onResponse"
                       content-type="application/json"
                       debounce-duration="300"
                       method="GET"
                       withCredentials
            ></iron-ajax>

            <h1>My Events</h1>
            <paper-card elevation="1">
                <div>
                    Here will be links to all of the users links.
                    <template is="dom-repeat" items="{{userEvents}}">
                        <h3>{{item.name}}</h3>
                    </template>
                </div>
            </paper-card>
        </template>

    </template>

    <script>

        Polymer({

            is: 'sportal-events',

        properties: {

            signedIn: {
                type: Object,
                notify: true
            },

            getUserEventById: {
                type: String,
                computed: 'computeEvents(signedIn)'
            },

            userEvents: {
                type: Object
            }

        },

            computeEvents: function(user) {
                return "http://localhost:3000/api/Users/" + user.id + "/events";
            },

            _onResponse: function(e) {
                console.log(e.detail.response);
                this.userEvents= e.detail.response;
                console.log(this.userEvents);
            }

        });

    </script>

</dom-module>