<html><head><link rel="import" href="../polymer/polymer.html">

</head><body><dom-module id="platinum-bluetooth-device">
  <template>
    <content id="characteristics" select="platinum-bluetooth-characteristic">
    </content>
  </template>
</dom-module>

<script>!function(){"use strict";var e="bluetooth"in navigator;"BluetoothDevice"in window||(window.BluetoothDevice={}),Polymer({is:"platinum-bluetooth-device",properties:{supported:{readOnly:!0,type:Boolean,value:e},servicesFilter:{type:Array,observer:"_servicesFilterChanged"},_device:{type:BluetoothDevice,observer:"_deviceChanged"}},_deviceChanged:function(){this._updateCharacteristics()},_servicesFilterChanged:function(){this._device=null},_updateCharacteristics:function(){this._characteristics=Polymer.dom(this.$.characteristics).getDistributedNodes();for(var e=0;e<this._characteristics.length;e++)this._characteristics[e]._device=this._device},created:function(){this._characteristics=[]},reset:function(){this._device=null},request:function(){if(!this.supported)return Promise.reject(new Error("Your browser does not support Bluetooth"));if(this._device)return this._updateCharacteristics(),Promise.resolve(this._device);if(!this.servicesFilter||0==this.servicesFilter.length)return Promise.reject(new Error("Please set Bluetooth services filter."));var e=this;return navigator.bluetooth.requestDevice({filters:[{services:this.servicesFilter}]}).then(function(t){return e._device=t,e._device})}})}();</script>
</body></html>