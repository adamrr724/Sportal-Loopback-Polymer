!function(n){"use strict";function t(n){var t,e,r,a,i,l,c,u,o,g,s,h,d=[].indexOf||function(n){for(var t=0,e=this.length;e>t;t++)if(t in this&&this[t]===n)return t;return-1};r=[{name:"amex",icon:"images/amex.png",pattern:/^3[47]/,valid_length:[15]},{name:"diners_club",icon:"images/diners_club.png",pattern:/^30[0-5]/,valid_length:[14]},{name:"diners_club",icon:"images/diners_club.png",pattern:/^36/,valid_length:[14]},{name:"jcb",icon:"images/jcb.png",pattern:/^35(2[89]|[3-8][0-9])/,valid_length:[16]},{name:"laser",pattern:/^(6304|670[69]|6771)/,valid_length:[16,17,18,19]},{name:"visa_electron",pattern:/^(4026|417500|4508|4844|491(3|7))/,valid_length:[16]},{name:"visa",icon:"images/visa.png",pattern:/^4/,valid_length:[16]},{name:"mastercard",icon:"images/mastercard.png",pattern:/^5[1-5]/,valid_length:[16]},{name:"maestro",pattern:/^(5018|5020|5038|6304|6759|676[1-3])/,valid_length:[12,13,14,15,16,17,18,19]},{name:"discover",icon:"images/discover.png",pattern:/^(6011|622(12[6-9]|1[3-9][0-9]|[2-8][0-9]{2}|9[0-1][0-9]|92[0-5]|64[4-9])|65)/,valid_length:[16]}];var p={};for(null==p.accept&&(p.accept=function(){var n,e,a;for(a=[],n=0,e=r.length;e>n;n++)t=r[n],a.push(t.name);return a}()),h=p.accept,g=0,s=h.length;s>g;g++)if(e=h[g],d.call(function(){var n,e,a;for(a=[],n=0,e=r.length;e>n;n++)t=r[n],a.push(t.name);return a}(),e)<0)throw"Credit card type '"+e+"' is not supported";return a=function(n){var a,i,l;for(l=function(){var n,e,a,i;for(i=[],n=0,e=r.length;e>n;n++)t=r[n],a=t.name,d.call(p.accept,a)>=0&&i.push(t);return i}(),a=0,i=l.length;i>a;a++)if(e=l[a],n.match(e.pattern))return e;return null},l=function(n){var t,e,r,a,i,l;for(r=0,l=n.split("").reverse(),e=a=0,i=l.length;i>a;e=++a)t=l[e],t=+t,e%2?(t*=2,r+=10>t?t:t-9):r+=t;return r%10===0},i=function(n,t){var e;return e=n.length,d.call(t.valid_length,e)>=0},o=function(n){return function(n){var t,r;return e=a(n),r=!1,t=!1,null!=e&&(r=l(n),t=i(n,e)),{card_type:e,valid:r&&t,luhn_valid:r,length_valid:t}}}(this),c=function(n){return n.replace(/[ -]/g,"")},(u=function(t){return function(){return o(c(n))}}(this))(n)}n.CreditCardValidator={validate:t}}(this);