(function(t){function o(t){return t&&t.Object===Object?t:null}var i={"function":!0,object:!0},n=i[typeof exports]&&exports&&!exports.nodeType?exports:null,e=i[typeof module]&&module&&!module.nodeType?module:null,r=o(n&&e&&"object"==typeof global&&global),s=o(i[typeof self]&&self),h=o(i[typeof window]&&window),u=(e&&e.exports===n?n:null,o(i[typeof this]&&this)),c=r||h!==(u&&u.window)&&h||s||u||Function("return this")();"function"==typeof define&&define.amd?define(["./rx"],function(o,i){return t(c,i,o)}):"object"==typeof module&&module&&module.exports===n?module.exports=t(c,module.exports,require("./rx")):c.Rx=t(c,{},c.Rx)}).call(this,function(t,o,i,n){function e(t){return function(){try{return t.apply(this,arguments)}catch(o){return A.e=o,A}}}function r(t){if(0===t.length)throw new j;return t[0]}function s(t,o,i,n){var e=N(o,i,3);return new _(function(o){return t.subscribe(new nt(o,t,e,n))},t)}var h=i.Observable,u=h.prototype,c=i.BinaryDisposable,_=i.AnonymousObservable,f=i.internals.AbstractObserver,p=i.Disposable.empty,l=i.helpers,a=l.defaultComparer,d=l.identity,b=l.defaultSubComparer,y=l.isFunction,m=l.isPromise,v=l.isArrayLike,x=l.isIterable,w=i.internals.inherits,C=h.fromPromise,E=h.from,N=i.internals.bindCallback,j=i.EmptyError,g=i.ObservableBase,O=i.ArgumentOutOfRangeError,A={e:{}},B=i.internals.tryCatch=function(t){if(!y(t))throw new TypeError("fn must be a function");return e(t)},k=function(t){function o(o,i,n){this.source=o,this._k=i,this._c=n,t.call(this)}return w(o,t),o.prototype.subscribeCore=function(t){return this.source.subscribe(new V(t,this._k,this._c))},o}(g),V=function(t){function o(o,i,n){this._o=o,this._k=i,this._c=n,this._v=null,this._hv=!1,this._l=[],t.call(this)}return w(o,t),o.prototype.next=function(t){var o=B(this._k)(t);if(o===A)return this._o.onError(o.e);var i=0;if(this._hv){if(i=B(this._c)(o,this._v),i===A)return this._o.onError(i.e)}else this._hv=!0,this._v=o;i>0&&(this._v=o,this._l=[]),i>=0&&this._l.push(t)},o.prototype.error=function(t){this._o.onError(t)},o.prototype.completed=function(){this._o.onNext(this._l),this._o.onCompleted()},o}(f),S=function(t){function o(o,i,n,e){this.source=o,this.accumulator=i,this.hasSeed=n,this.seed=e,t.call(this)}return w(o,t),o.prototype.subscribeCore=function(t){return this.source.subscribe(new M(t,this))},o}(g),M=function(t){function o(o,i){this._o=o,this._p=i,this._fn=i.accumulator,this._hs=i.hasSeed,this._s=i.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,t.call(this)}return w(o,t),o.prototype.next=function(t){return!this._hv&&(this._hv=!0),this._ha?this._a=B(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?B(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===A?this._o.onError(this._a.e):void this._i++},o.prototype.error=function(t){this._o.onError(t)},o.prototype.completed=function(){this._hv&&this._o.onNext(this._a),!this._hv&&this._hs&&this._o.onNext(this._s),!this._hv&&!this._hs&&this._o.onError(new j),this._o.onCompleted()},o}(f);u.reduce=function(){var t,o=!1,i=arguments[0];return 2===arguments.length&&(o=!0,t=arguments[1]),new S(this,i,o,t)};var R=function(t){function o(o,i){this.source=o,this._fn=i,t.call(this)}return w(o,t),o.prototype.subscribeCore=function(t){return this.source.subscribe(new T(t,this._fn,this.source))},o}(g),T=function(t){function o(o,i,n){this._o=o,this._fn=i,this._s=n,this._i=0,t.call(this)}return w(o,t),o.prototype.next=function(t){var o=B(this._fn)(t,this._i++,this._s);return o===A?this._o.onError(o.e):void(Boolean(o)&&(this._o.onNext(!0),this._o.onCompleted()))},o.prototype.error=function(t){this._o.onError(t)},o.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},o}(f);u.some=function(t,o){var i=N(t,o,3);return new R(this,i)};var q=function(t){function o(o){this.source=o,t.call(this)}return w(o,t),o.prototype.subscribeCore=function(t){return this.source.subscribe(new I(t))},o}(g),I=function(t){function o(o){this._o=o,t.call(this)}return w(o,t),o.prototype.next=function(){this._o.onNext(!1),this._o.onCompleted()},o.prototype.error=function(t){this._o.onError(t)},o.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},o}(f);u.isEmpty=function(){return new q(this)};var D=function(t){function o(o,i){this.source=o,this._fn=i,t.call(this)}return w(o,t),o.prototype.subscribeCore=function(t){return this.source.subscribe(new F(t,this._fn,this.source))},o}(g),F=function(t){function o(o,i,n){this._o=o,this._fn=i,this._s=n,this._i=0,t.call(this)}return w(o,t),o.prototype.next=function(t){var o=B(this._fn)(t,this._i++,this._s);return o===A?this._o.onError(o.e):void(Boolean(o)||(this._o.onNext(!1),this._o.onCompleted()))},o.prototype.error=function(t){this._o.onError(t)},o.prototype.completed=function(){this._o.onNext(!0),this._o.onCompleted()},o}(f);u.every=function(t,o){var i=N(t,o,3);return new D(this,i)};var P=function(t){function o(o,i,n){var e=+n||0;Math.abs(e)===1/0&&(e=0),this.source=o,this._elem=i,this._n=e,t.call(this)}return w(o,t),o.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(!1),t.onCompleted(),p):this.source.subscribe(new L(t,this._elem,this._n))},o}(g),L=function(t){function o(o,i,n){this._o=o,this._elem=i,this._n=n,this._i=0,t.call(this)}function i(t,o){return 0===t&&0===o||t===o||isNaN(t)&&isNaN(o)}return w(o,t),o.prototype.next=function(t){this._i++>=this._n&&i(t,this._elem)&&(this._o.onNext(!0),this._o.onCompleted())},o.prototype.error=function(t){this._o.onError(t)},o.prototype.completed=function(){this._o.onNext(!1),this._o.onCompleted()},o}(f);u.includes=function(t,o){return new P(this,t,o)};var z=function(t){function o(o,i){this.source=o,this._fn=i,t.call(this)}return w(o,t),o.prototype.subscribeCore=function(t){return this.source.subscribe(new G(t,this._fn,this.source))},o}(g),G=function(t){function o(o,i,n){this._o=o,this._fn=i,this._s=n,this._i=0,this._c=0,t.call(this)}return w(o,t),o.prototype.next=function(t){if(this._fn){var o=B(this._fn)(t,this._i++,this._s);if(o===A)return this._o.onError(o.e);Boolean(o)&&this._c++}else this._c++},o.prototype.error=function(t){this._o.onError(t)},o.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},o}(f);u.count=function(t,o){var i=N(t,o,3);return new z(this,i)};var H=function(t){function o(o,i,n){this.source=o,this._e=i,this._n=n,t.call(this)}return w(o,t),o.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(-1),t.onCompleted(),p):this.source.subscribe(new J(t,this._e,this._n))},o}(g),J=function(t){function o(o,i,n){this._o=o,this._e=i,this._n=n,this._i=0,t.call(this)}return w(o,t),o.prototype.next=function(t){this._i>=this._n&&t===this._e&&(this._o.onNext(this._i),this._o.onCompleted()),this._i++},o.prototype.error=function(t){this._o.onError(t)},o.prototype.completed=function(){this._o.onNext(-1),this._o.onCompleted()},o}(f);u.indexOf=function(t,o){var i=+o||0;return Math.abs(i)===1/0&&(i=0),new H(this,t,i)};var K=function(t){function o(o,i){this.source=o,this._fn=i,t.call(this)}return w(o,t),o.prototype.subscribeCore=function(t){return this.source.subscribe(new Q(t,this._fn,this.source))},o}(g),Q=function(t){function o(o,i,n){this._o=o,this._fn=i,this._s=n,this._i=0,this._c=0,t.call(this)}return w(o,t),o.prototype.next=function(t){if(this._fn){var o=B(this._fn)(t,this._i++,this._s);if(o===A)return this._o.onError(o.e);this._c+=o}else this._c+=t},o.prototype.error=function(t){this._o.onError(t)},o.prototype.completed=function(){this._o.onNext(this._c),this._o.onCompleted()},o}(f);u.sum=function(t,o){var i=N(t,o,3);return new K(this,i)},u.minBy=function(t,o){return o||(o=b),new k(this,t,function(t,i){return-1*o(t,i)})},u.min=function(t){return this.minBy(d,t).map(r)},u.maxBy=function(t,o){return o||(o=b),new k(this,t,o)},u.max=function(t){return this.maxBy(d,t).map(r)};var U=function(t){function o(o,i){this.source=o,this._fn=i,t.call(this)}return w(o,t),o.prototype.subscribeCore=function(t){return this.source.subscribe(new W(t,this._fn,this.source))},o}(g),W=function(t){function o(o,i,n){this._o=o,this._fn=i,this._s=n,this._c=0,this._t=0,t.call(this)}return w(o,t),o.prototype.next=function(t){if(this._fn){var o=B(this._fn)(t,this._c++,this._s);if(o===A)return this._o.onError(o.e);this._t+=o}else this._c++,this._t+=t},o.prototype.error=function(t){this._o.onError(t)},o.prototype.completed=function(){return 0===this._c?this._o.onError(new j):(this._o.onNext(this._t/this._c),void this._o.onCompleted())},o}(f);u.average=function(t,o){var i,n=this;return y(t)&&(i=N(t,o,3)),new U(n,i)},u.sequenceEqual=function(t,o){var i=this;return o||(o=a),new _(function(n){var e=!1,r=!1,s=[],h=[],u=i.subscribe(function(t){if(h.length>0){var i=h.shift(),e=B(o)(i,t);if(e===A)return n.onError(e.e);e||(n.onNext(!1),n.onCompleted())}else r?(n.onNext(!1),n.onCompleted()):s.push(t)},function(t){n.onError(t)},function(){e=!0,0===s.length&&(h.length>0?(n.onNext(!1),n.onCompleted()):r&&(n.onNext(!0),n.onCompleted()))});(v(t)||x(t))&&(t=E(t)),m(t)&&(t=C(t));var _=t.subscribe(function(t){if(s.length>0){var i=s.shift(),r=B(o)(i,t);if(r===A)return n.onError(r.e);r||(n.onNext(!1),n.onCompleted())}else e?(n.onNext(!1),n.onCompleted()):h.push(t)},function(t){n.onError(t)},function(){r=!0,0===h.length&&(s.length>0?(n.onNext(!1),n.onCompleted()):e&&(n.onNext(!0),n.onCompleted()))});return new c(u,_)},i)};var X=function(t){function o(o,i,n){this.source=o,this._i=i,this._d=n,t.call(this)}return w(o,t),o.prototype.subscribeCore=function(t){return this.source.subscribe(new Y(t,this._i,this._d))},o}(g),Y=function(t){function o(o,i,n){this._o=o,this._i=i,this._d=n,t.call(this)}return w(o,t),o.prototype.next=function(t){0===this._i--&&(this._o.onNext(t),this._o.onCompleted())},o.prototype.error=function(t){this._o.onError(t)},o.prototype.completed=function(){this._d===n?this._o.onError(new O):(this._o.onNext(this._d),this._o.onCompleted())},o}(f);u.elementAt=function(t,o){if(0>t)throw new O;return new X(this,t,o)};var Z=function(t){function o(o,i,n){this._o=o,this._obj=i,this._s=n,this._i=0,this._hv=!1,this._v=null,t.call(this)}return w(o,t),o.prototype.next=function(t){var o=!1;if(this._obj.predicate){var i=B(this._obj.predicate)(t,this._i++,this._s);if(i===A)return this._o.onError(i.e);Boolean(i)&&(o=!0)}else this._obj.predicate||(o=!0);if(o){if(this._hv)return this._o.onError(new Error("Sequence contains more than one matching element"));this._hv=!0,this._v=t}},o.prototype.error=function(t){this._o.onError(t)},o.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===n?this._o.onError(new j):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},o}(f);u.single=function(t,o){var i={},n=this;if(i="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},y(i.predicate)){var e=i.predicate;i.predicate=N(e,i.thisArg,3)}return new _(function(t){return n.subscribe(new Z(t,i,n))},n)};var $=function(t){function o(o,i){this.source=o,this._obj=i,t.call(this)}return w(o,t),o.prototype.subscribeCore=function(t){return this.source.subscribe(new tt(t,this._obj,this.source))},o}(g),tt=function(t){function o(o,i,n){this._o=o,this._obj=i,this._s=n,this._i=0,t.call(this)}return w(o,t),o.prototype.next=function(t){if(this._obj.predicate){var o=B(this._obj.predicate)(t,this._i++,this._s);if(o===A)return this._o.onError(o.e);Boolean(o)&&(this._o.onNext(t),this._o.onCompleted())}else this._obj.predicate||(this._o.onNext(t),this._o.onCompleted())},o.prototype.error=function(t){this._o.onError(t)},o.prototype.completed=function(){this._obj.defaultValue===n?this._o.onError(new j):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},o}(f);u.first=function(){var t={};if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},y(t.predicate)){var o=t.predicate;t.predicate=N(o,t.thisArg,3)}return new $(this,t)};var ot=function(t){function o(o,i){this.source=o,this._obj=i,t.call(this)}return w(o,t),o.prototype.subscribeCore=function(t){return this.source.subscribe(new it(t,this._obj,this.source))},o}(g),it=function(t){function o(o,i,n){this._o=o,this._obj=i,this._s=n,this._i=0,this._hv=!1,this._v=null,t.call(this)}return w(o,t),o.prototype.next=function(t){var o=!1;if(this._obj.predicate){var i=B(this._obj.predicate)(t,this._i++,this._s);if(i===A)return this._o.onError(i.e);Boolean(i)&&(o=!0)}else this._obj.predicate||(o=!0);o&&(this._hv=!0,this._v=t)},o.prototype.error=function(t){this._o.onError(t)},o.prototype.completed=function(){this._hv?(this._o.onNext(this._v),this._o.onCompleted()):this._obj.defaultValue===n?this._o.onError(new j):(this._o.onNext(this._obj.defaultValue),this._o.onCompleted())},o}(f);u.last=function(){var t={};if(t="object"==typeof arguments[0]?arguments[0]:{predicate:arguments[0],thisArg:arguments[1],defaultValue:arguments[2]},y(t.predicate)){var o=t.predicate;t.predicate=N(o,t.thisArg,3)}return new ot(this,t)};var nt=function(t){function o(o,i,n,e){this._o=o,this._s=i,this._cb=n,this._y=e,this._i=0,t.call(this)}return w(o,t),o.prototype.next=function(t){var o=B(this._cb)(t,this._i,this._s);return o===A?this._o.onError(o.e):void(o?(this._o.onNext(this._y?this._i:t),this._o.onCompleted()):this._i++)},o.prototype.error=function(t){this._o.onError(t)},o.prototype.completed=function(){this._y&&this._o.onNext(-1),this._o.onCompleted()},o}(f);u.find=function(t,o){return s(this,t,o,!1)},u.findIndex=function(t,o){return s(this,t,o,!0)};var et=function(t){function o(o){this.source=o,t.call(this)}return w(o,t),o.prototype.subscribeCore=function(t){return this.source.subscribe(new rt(t))},o}(g),rt=function(o){function i(i){this._o=i,this._s=new t.Set,o.call(this)}return w(i,o),i.prototype.next=function(t){this._s.add(t)},i.prototype.error=function(t){this._o.onError(t)},i.prototype.completed=function(){this._o.onNext(this._s),this._o.onCompleted()},i}(f);u.toSet=function(){if("undefined"==typeof t.Set)throw new TypeError;return new et(this)};var st=function(t){function o(o,i,n){this.source=o,this._k=i,this._e=n,t.call(this)}return w(o,t),o.prototype.subscribeCore=function(t){return this.source.subscribe(new ht(t,this._k,this._e))},o}(g),ht=function(o){function i(i,n,e){this._o=i,this._k=n,this._e=e,this._m=new t.Map,o.call(this)}return w(i,o),i.prototype.next=function(t){var o=B(this._k)(t);if(o===A)return this._o.onError(o.e);var i=t;return this._e&&(i=B(this._e)(t),i===A)?this._o.onError(i.e):void this._m.set(o,i)},i.prototype.error=function(t){this._o.onError(t)},i.prototype.completed=function(){this._o.onNext(this._m),this._o.onCompleted()},i}(f);u.toMap=function(o,i){if("undefined"==typeof t.Map)throw new TypeError;return new st(this,o,i)};var ut=function(t){function o(o,i,n){this.source=o,this._b=i,this._e=n,t.call(this)}return w(o,t),o.prototype.subscribeCore=function(t){return this.source.subscribe(new ct(t,this._b,this._e))},o}(g),ct=function(t){function o(o,i,n){this._o=o,this._b=i,this._e=n,this._i=0,t.call(this)}return w(o,t),o.prototype.next=function(t){this._i>=this._b&&(this._e===this._i?this._o.onCompleted():this._o.onNext(t)),this._i++},o.prototype.error=function(t){this._o.onError(t)},o.prototype.completed=function(){this._o.onCompleted()},o}(f);u.slice=function(t,o){var n=t||0;if(0>n)throw new i.ArgumentOutOfRangeError;if("number"==typeof o&&n>o)throw new i.ArgumentOutOfRangeError;return new ut(this,n,o)};var _t=function(t){function o(o,i,n){this.source=o,this._e=i,this._n=n,t.call(this)}return w(o,t),o.prototype.subscribeCore=function(t){return this._n<0?(t.onNext(-1),t.onCompleted(),p):this.source.subscribe(new ft(t,this._e,this._n))},o}(g),ft=function(t){function o(o,i,n){this._o=o,this._e=i,this._n=n,this._v=0,this._hv=!1,this._i=0,t.call(this)}return w(o,t),o.prototype.next=function(t){this._i>=this._n&&t===this._e&&(this._hv=!0,this._v=this._i),this._i++},o.prototype.error=function(t){this._o.onError(t)},o.prototype.completed=function(){this._hv?this._o.onNext(this._v):this._o.onNext(-1),this._o.onCompleted()},o}(f);return u.lastIndexOf=function(t,o){var i=+o||0;return Math.abs(i)===1/0&&(i=0),new _t(this,t,i)},i});