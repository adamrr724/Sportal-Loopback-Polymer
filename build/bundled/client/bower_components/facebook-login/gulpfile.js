"use strict";var gulp=require("gulp"),babel=require("gulp-babel"),vulcanize=require("gulp-vulcanize"),crisper=require("gulp-crisper"),del=require("del"),htmlreplace=require("gulp-html-replace"),runSequence=require("run-sequence"),browserSync=require("browser-sync"),path=require("path"),historyApiFallback=require("connect-history-api-fallback"),DIST="dist",dist=function(e){return e?path.join(DIST,e):DIST};gulp.task("replacePolymerPath",function(){gulp.src("dist/facebook-login.html").pipe(htmlreplace({PolymerImport:'<link rel="import" href="../../polymer/polymer.html">'})).pipe(gulp.dest("dist"))}),gulp.task("crisper",function(){return gulp.src("facebook-login.html").pipe(crisper({scriptInHead:!1})).pipe(gulp.dest("dist"))}),gulp.task("babel",function(){return gulp.src("dist/facebook-login.js").pipe(babel({presets:["es2015"]})).pipe(gulp.dest("dist"))}),gulp.task("vulcanize",function(){return gulp.src("dist/facebook-login.html").pipe(vulcanize({abspath:"",excludes:["../polymer/polymer.html"],stripExcludes:!1,inlineScripts:!0,inlineCss:!0})).pipe(gulp.dest("dist"))}),gulp.task("cleanDistFolder",function(){return del(["dist/facebook-login.js"])}),gulp.task("cleanDependencies",function(){return del(["node_modules"])}),gulp.task("serve",["default"],function(){browserSync({port:8080,notify:!1,logPrefix:"PSK",snippetOptions:{rule:{match:'<span id="browser-sync-binding"></span>',fn:function(e){return e}}},server:{baseDir:["demo"],middleware:[historyApiFallback()],routes:{"/dist":"dist","/webcomponentsjs":"../webcomponentsjs","/polymer":"../polymer"}}})}),gulp.task("default",function(e){runSequence("crisper","replacePolymerPath","babel","vulcanize","cleanDistFolder",e)});