(function(n){function t(n){return n&&n.Object===Object?n:null}var e={"function":!0,object:!0},r=e[typeof exports]&&exports&&!exports.nodeType?exports:null,o=e[typeof module]&&module&&!module.nodeType?module:null,i=t(r&&o&&"object"==typeof global&&global),u=t(e[typeof self]&&self),s=t(e[typeof window]&&window),l=(o&&o.exports===r?r:null,t(e[typeof this]&&this)),c=i||s!==(l&&l.window)&&s||u||l||Function("return this")();"function"==typeof define&&define.amd?define(["./rx.binding","exports"],function(t,e){return c.Rx=n(c,e,t),c.Rx}):"object"==typeof module&&module&&module.exports===r?module.exports=n(c,module.exports,require("./rx")):c.Rx=n(c,{},c.Rx)}).call(this,function(n,t,e,r){function o(n){return function(){try{return n.apply(this,arguments)}catch(t){return F.e=t,F}}}function i(n){return n?_.isObservable(n)?n:A(n)?_.fromPromise(n):f(n)||c(n)?P.call(this,n):S(n)?l.call(this,n):k(n)||D(n)?u.call(this,n):a(n)?s.call(this,n):n:n}function u(n){return _.from(n).concatMap(function(n){return _.isObservable(n)||a(n)?i.call(null,n):e.Observable.just(n)}).toArray()}function s(n){function t(n,t){e[t]=r,u.push(n.map(function(n){e[t]=n}))}for(var e=new n.constructor,o=Object.keys(n),u=[],s=0,l=o.length;l>s;s++){var c=o[s],f=i.call(this,n[c]);f&&_.isObservable(f)?t(f,c):e[c]=n[c]}return _.forkJoin.apply(_,u).map(function(){return e})}function l(n){var t=this;return new N(function(e){n.call(t,function(){var n=arguments[0],t=arguments[1];if(n)return e.onError(n);if(arguments.length>2){for(var r=[],o=1,i=arguments.length;i>o;o++)r.push(arguments[o]);t=r}e.onNext(t),e.onCompleted()})})}function c(n){return S(n.next)&&S(n["throw"])}function f(n){var t=n.constructor;return t?"GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName?!0:c(t.prototype):!1}function a(n){return Object==n.constructor}function p(n,t,e,r){var o=new E;return r.push(h(o,t,e)),n.apply(t,r),o.asObservable()}function h(n,t,e){return function(){for(var r=arguments.length,o=new Array(r),i=0;r>i;i++)o[i]=arguments[i];if(S(e)){if(o=T(e).apply(t,o),o===F)return n.onError(o.e);n.onNext(o)}else o.length<=1?n.onNext(o[0]):n.onNext(o);n.onCompleted()}}function d(n,t,e,r){var o=new E;return r.push(v(o,t,e)),n.apply(t,r),o.asObservable()}function v(n,t,e){return function(){var r=arguments[0];if(r)return n.onError(r);for(var o=arguments.length,i=[],u=1;o>u;u++)i[u-1]=arguments[u];if(S(e)){var i=T(e).apply(t,i);if(i===F)return n.onError(i.e);n.onNext(i)}else i.length<=1?n.onNext(i[0]):n.onNext(i);n.onCompleted()}}function b(t){return n.StaticNodeList?t instanceof n.StaticNodeList||t instanceof n.NodeList:"[object NodeList]"===Object.prototype.toString.call(t)}function y(n,t,e){this._e=n,this._n=t,this._fn=e,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function m(n,t,e){var r=new O,o=Object.prototype.toString.call(n);if(b(n)||"[object HTMLCollection]"===o)for(var i=0,u=n.length;u>i;i++)r.add(m(n.item(i),t,e));else n&&r.add(new y(n,t,e));return r}var _=e.Observable,x=_.fromPromise,w=_.throwError,N=e.AnonymousObservable,g=e.ObservableBase,E=e.AsyncSubject,O=(e.Disposable.create,e.CompositeDisposable),C=(e.Scheduler.immediate,e.Scheduler["default"]),j=e.internals.inherits,L=e.Scheduler.isScheduler,A=e.helpers.isPromise,S=e.helpers.isFunction,D=e.helpers.isIterable,k=e.helpers.isArrayLike,F={e:{}},T=e.internals.tryCatch=function(n){if(!S(n))throw new TypeError("fn must be a function");return o(n)};_.wrap=function(n){function t(){return _.spawn.call(this,n.apply(this,arguments))}return t.__generatorFunction__=n,t};var P=_.spawn=function(){for(var n=arguments[0],t=this,e=[],r=1,o=arguments.length;o>r;r++)e.push(arguments[r]);return new N(function(r){function o(t){var e=T(n.next).call(n,t);return e===F?r.onError(e.e):void s(e)}function u(t){var e=T(n.next).call(n,t);return e===F?r.onError(e.e):void s(e)}function s(n){if(n.done)return r.onNext(n.value),void r.onCompleted();var e=i.call(t,n.value),s=null,c=!1;_.isObservable(e)?l.add(e.subscribe(function(n){c=!0,s=n},u,function(){c&&o(s)})):u(new TypeError("type not supported"))}var l=new O;return S(n)&&(n=n.apply(t,e)),n&&S(n.next)?(o(),l):(r.onNext(n),r.onCompleted())})};_.start=function(n,t,e){return R(n,t,e)()};var R=_.toAsync=function(n,t,e){return L(e)||(e=C),function(){var r=arguments,o=new E;return e.schedule(null,function(){var e;try{e=n.apply(t,r)}catch(i){return void o.onError(i)}o.onNext(e),o.onCompleted()}),o.asObservable()}};_.fromCallback=function(n,t,e){return function(){"undefined"==typeof t&&(t=this);for(var r=arguments.length,o=new Array(r),i=0;r>i;i++)o[i]=arguments[i];return p(n,t,e,o)}},_.fromNodeCallback=function(n,t,e){return function(){"undefined"==typeof t&&(t=this);for(var r=arguments.length,o=new Array(r),i=0;r>i;i++)o[i]=arguments[i];return d(n,t,e,o)}},y.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},e.config.useNativeEvents=!1;var G=function(n){function t(t,e,r){this._el=t,this._n=e,this._fn=r,n.call(this)}function e(n,t){return function(){var e=arguments[0];return S(t)&&(e=T(t).apply(null,arguments),e===F)?n.onError(e.e):void n.onNext(e)}}return j(t,n),t.prototype.subscribeCore=function(n){return m(this._el,this._n,e(n,this._fn))},t}(g);_.fromEvent=function(n,t,r){return n.addListener?q(function(e){n.addListener(t,e)},function(e){n.removeListener(t,e)},r):e.config.useNativeEvents||"function"!=typeof n.on||"function"!=typeof n.off?new G(n,t,r).publish().refCount():q(function(e){n.on(t,e)},function(e){n.off(t,e)},r)};var M=function(n){function t(t,e,r){this._add=t,this._del=e,this._fn=r,n.call(this)}function e(n,t){return function(){var e=arguments[0];return S(t)&&(e=T(t).apply(null,arguments),e===F)?n.onError(e.e):void n.onNext(e)}}function r(n,t,e){this._del=n,this._fn=t,this._ret=e,this.isDisposed=!1}return j(t,n),t.prototype.subscribeCore=function(n){var t=e(n,this._fn),o=this._add(t);return new r(this._del,t,o)},r.prototype.dispose=function(){this.isDisposed||(S(this._del)&&this._del(this._fn,this._ret),this.isDisposed=!0)},t}(g),q=_.fromEventPattern=function(n,t,e){return new M(n,t,e).publish().refCount()};return _.startAsync=function(n){var t=T(n)();return t===F?w(t.e):x(t)},e});