(function(t){function e(t){return t&&t.Object===Object?t:null}function i(t){return function(){try{return t.apply(this,arguments)}catch(e){return T.e=e,T}}}function n(t){throw t}function s(t,e){if(C&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(N)){for(var i=[],n=e;n;n=n.source)n.stack&&i.unshift(n.stack);i.unshift(t.stack);var s=i.join("\n"+N+"\n");t.stack=r(s)}}function r(t){for(var e=t.split("\n"),i=[],n=0,s=e.length;s>n;n++){var r=e[n];o(r)||u(r)||!r||i.push(r)}return i.join("\n")}function o(t){var e=p(t);if(!e)return!1;var i=e[0],n=e[1];return i===A&&n>=R&&vt>=n}function u(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function c(){if(C)try{throw new Error}catch(t){var e=t.stack.split("\n"),i=e[0].indexOf("@")>0?e[1]:e[2],n=p(i);if(!n)return;return A=n[0],n[1]}}function p(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var i=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(i)return[i[1],Number(i[2])];var n=/.*@(.+):(\d+)$/.exec(t);return n?[n[1],Number(n[2])]:void 0}function a(t,e){this.id=t,this.value=e}var h={"function":!0,object:!0},f=h[typeof exports]&&exports&&!exports.nodeType?exports:null,l=h[typeof module]&&module&&!module.nodeType?module:null,d=e(f&&l&&"object"==typeof global&&global),v=e(h[typeof self]&&self),b=e(h[typeof window]&&window),m=l&&l.exports===f?f:null,y=e(h[typeof this]&&this),g=d||b!==(y&&y.window)&&b||v||y||Function("return this")(),w={internals:{},config:{Promise:g.Promise},helpers:{}},D=w.helpers.noop=function(){},_=w.helpers.defaultNow=function(){return Date.now?Date.now:function(){return+new Date}}(),x=w.helpers.defaultError=function(t){throw t},S=(w.helpers.isPromise=function(t){return!!t&&!isFunction(t.subscribe)&&isFunction(t.then)},w.helpers.defaultSubComparer=function(t,e){return t>e?1:e>t?-1:0});isFunction=w.helpers.isFunction=function(){var t=function(t){return"function"==typeof t||!1};return t(/x/)&&(t=function(t){return"function"==typeof t&&"[object Function]"==toString.call(t)}),t}();var E=w.NotImplementedError=function(t){this.message=t||"This operation is not implemented",Error.call(this)};E.prototype=Error.prototype;var F=w.NotSupportedError=function(t){this.message=t||"This operation is not supported",Error.call(this)};F.prototype=Error.prototype;var k=w.helpers.notImplemented=function(){throw new E},T=(w.helpers.notSupported=function(){throw new F},{e:{}}),O=w.internals.tryCatch=function(t){if(!isFunction(t))throw new TypeError("fn must be a function");return i(t)};w.config.longStackSupport=!1;var C=!1,j=O(function(){throw new Error})();C=!!j.e&&!!j.e.stack;var A,R=c(),N="From previous event:",P=({}.hasOwnProperty,Array.prototype.slice,w.internals.inherits=function(t,e){function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i}),q=(w.internals.addProperties=function(t){for(var e=[],i=1,n=arguments.length;n>i;i++)e.push(arguments[i]);for(var s=0,r=e.length;r>s;s++){var o=e[s];for(var u in o)t[u]=o[u]}},w.internals.addRef=function(t,e){return new lt(function(i){return new Q(e.getDisposable(),t.subscribe(i))})},w.CompositeDisposable=function(){var t,e,i=[];if(Array.isArray(arguments[0]))i=arguments[0];else for(e=arguments.length,i=new Array(e),t=0;e>t;t++)i[t]=arguments[t];this.disposables=i,this.isDisposed=!1,this.length=i.length}),I=q.prototype;I.add=function(t){this.isDisposed?t.dispose():(this.disposables.push(t),this.length++)},I.remove=function(t){var e=!1;if(!this.isDisposed){var i=this.disposables.indexOf(t);-1!==i&&(e=!0,this.disposables.splice(i,1),this.length--,t.dispose())}return e},I.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=this.disposables.length,e=new Array(t),i=0;t>i;i++)e[i]=this.disposables[i];for(this.disposables=[],this.length=0,i=0;t>i;i++)e[i].dispose()}};var M=w.Disposable=function(t){this.isDisposed=!1,this.action=t||D};M.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var $=M.create=function(t){return new M(t)},H=M.empty={dispose:D},z=M.isDisposable=function(t){return t&&isFunction(t.dispose)},B=(M.checkDisposed=function(t){if(t.isDisposed)throw new ObjectDisposedError},M._fixup=function(t){return z(t)?t:H}),L=w.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};L.prototype.getDisposable=function(){return this.current},L.prototype.setDisposable=function(t){if(this.current)throw new Error("Disposable has already been assigned");var e=this.isDisposed;!e&&(this.current=t),e&&t&&t.dispose()},L.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null,t&&t.dispose()}};var W=w.SerialDisposable=function(){this.isDisposed=!1,this.current=null};W.prototype.getDisposable=function(){return this.current},W.prototype.setDisposable=function(t){var e=this.isDisposed;if(!e){var i=this.current;this.current=t}i&&i.dispose(),e&&t&&t.dispose()},W.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null}t&&t.dispose()};var Q=w.BinaryDisposable=function(t,e){this._first=t,this._second=e,this.isDisposed=!1};Q.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this._first;this._first=null,t&&t.dispose();var e=this._second;this._second=null,e&&e.dispose()}};var G=w.NAryDisposable=function(t){this._disposables=t,this.isDisposed=!1};G.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=0,e=this._disposables.length;e>t;t++)this._disposables[t].dispose();this._disposables.length=0}};var J=w.internals.ScheduledItem=function(t,e,i,n,s){this.scheduler=t,this.state=e,this.action=i,this.dueTime=n,this.comparer=s||S,this.disposable=new L};J.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},J.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)},J.prototype.isCancelled=function(){return this.disposable.isDisposed},J.prototype.invokeCore=function(){return B(this.action(this.scheduler,this.state))};var K=w.Scheduler=function(){function t(){}t.isScheduler=function(e){return e instanceof t};var e=t.prototype;return e.schedule=function(t,e){throw new E},e.scheduleFuture=function(e,i,n){var s=i;return s instanceof Date&&(s-=this.now()),s=t.normalize(s),0===s?this.schedule(e,n):this._scheduleFuture(e,s,n)},e._scheduleFuture=function(t,e,i){throw new E},t.now=_,t.prototype.now=_,t.normalize=function(t){return 0>t&&(t=0),t},t}(),U=K.normalize;K.isScheduler;!function(t){function e(t,e){function i(e){function n(t,e){return o?r.remove(c):u=!0,s(e,i),H}var o=!1,u=!1,c=t.schedule(e,n);u||(r.add(c),o=!0)}var n=e[0],s=e[1],r=new q;return s(n,i),r}function i(t,e){function i(e,n){function o(t,e){return u?r.remove(p):c=!0,s(e,i),H}var u=!1,c=!1,p=t.scheduleFuture(e,n,o);c||(r.add(p),u=!0)}var n=e[0],s=e[1],r=new q;return s(n,i),r}t.scheduleRecursive=function(t,i){return this.schedule([t,i],e)},t.scheduleRecursiveFuture=function(t,e,n){return this.scheduleFuture([t,n],e,i)}}(K.prototype),function(t){t.schedulePeriodic=function(t,e,i){if("undefined"==typeof g.setInterval)throw new F;e=U(e);var n=t,s=g.setInterval(function(){n=i(n)},e);return $(function(){g.clearInterval(s)})}}(K.prototype);var V,X,Y=(w.internals.SchedulePeriodicRecursive=function(){function t(t){return function(e,i){i(0,t._period);var s=O(t._action)(t._state);s===T&&(t._cancel.dispose(),n(s.e)),t._state=s}}function e(t,e,i,n){this._scheduler=t,this._state=e,this._period=i,this._action=n}return e.prototype.start=function(){var e=new L;return this._cancel=e,e.setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,t(this))),e},e}(),function(t){function e(){t.call(this)}return P(e,t),e.prototype.schedule=function(t,e){return B(e(this,t))},e}(K)),Z=(K.immediate=new Y,function(t){function e(){for(;s.length>0;){var t=s.dequeue();!t.isCancelled()&&t.invoke()}}function i(){t.call(this)}var s;return P(i,t),i.prototype.schedule=function(t,i){var r=new J(this,t,i,this.now());if(s)s.enqueue(r);else{s=new rt(4),s.enqueue(r);var o=O(e)();s=null,o===T&&n(o.e)}return r.disposable},i.prototype.scheduleRequired=function(){return!s},i}(K)),tt=K.currentThread=new Z,et=function(){var t,e=D;if(g.setTimeout)t=g.setTimeout,e=g.clearTimeout;else{if(!g.WScript)throw new F;t=function(t,e){g.WScript.Sleep(e),t()}}return{setTimeout:t,clearTimeout:e}}(),it=et.setTimeout,nt=et.clearTimeout;!function(){function t(e){if(r)it(function(){t(e)},0);else{var i=s[e];if(i){r=!0;var o=O(i)();X(e),r=!1,o===T&&n(o.e)}}}function e(){if(!g.postMessage||g.importScripts)return!1;var t=!1,e=g.onmessage;return g.onmessage=function(){t=!0},g.postMessage("","*"),g.onmessage=e,t}var i=1,s={},r=!1;X=function(t){delete s[t]};var o=new RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),u="function"==typeof(u=d&&m&&d.setImmediate)&&!o.test(u)&&u;if(isFunction(u))V=function(e){var n=i++;return s[n]=e,u(function(){t(n)}),n};else if("undefined"!=typeof process&&"[object process]"==={}.toString.call(process))V=function(e){var n=i++;return s[n]=e,process.nextTick(function(){t(n)}),n};else if(e()){var c="ms.rx.schedule"+Math.random(),p=function(e){"string"==typeof e.data&&e.data.substring(0,c.length)===c&&t(e.data.substring(c.length))};g.addEventListener("message",p,!1),V=function(t){var e=i++;return s[e]=t,g.postMessage(c+e,"*"),e}}else if(g.MessageChannel){var a=new g.MessageChannel;a.port1.onmessage=function(e){t(e.data)},V=function(t){var e=i++;return s[e]=t,a.port2.postMessage(e),e}}else V="document"in g&&"onreadystatechange"in g.document.createElement("script")?function(e){var n=g.document.createElement("script"),r=i++;return s[r]=e,n.onreadystatechange=function(){t(r),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},g.document.documentElement.appendChild(n),r}:function(e){var n=i++;return s[n]=e,it(function(){t(n)},0),n}}();var st=function(t){function e(){t.call(this)}function i(t,e,i,n){return function(){t.setDisposable(M._fixup(e(i,n)))}}function n(t){this._id=t,this.isDisposed=!1}function s(t){this._id=t,this.isDisposed=!1}function r(t,e,i){return function(){e(t,i)}}return P(e,t),n.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,X(this._id))},s.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,nt(this._id))},e.prototype.schedule=function(t,e){var s=new L,r=V(i(s,e,this,t));return new Q(s,new n(r))},e.prototype._scheduleFuture=function(t,e,n){if(0===e)return this.schedule(t,n);var r=new L,o=it(i(r,n,this,t),e);return new Q(r,new s(o))},e.prototype.scheduleLongRunning=function(t,e){var i=$(D);return V(r(t,e,i)),i},e}(K);K["default"]=K.async=new st;a.prototype.compareTo=function(t){var e=this.value.compareTo(t.value);return 0===e&&(e=this.id-t.id),e};var rt=w.internals.PriorityQueue=function(t){this.items=new Array(t),this.length=0},ot=rt.prototype;ot.isHigherPriority=function(t,e){return this.items[t].compareTo(this.items[e])<0},ot.percolate=function(t){if(!(t>=this.length||0>t)){var e=t-1>>1;if(!(0>e||e===t)&&this.isHigherPriority(t,e)){var i=this.items[t];this.items[t]=this.items[e],this.items[e]=i,this.percolate(e)}}},ot.heapify=function(t){if(+t||(t=0),!(t>=this.length||0>t)){var e=2*t+1,i=2*t+2,n=t;if(e<this.length&&this.isHigherPriority(e,n)&&(n=e),i<this.length&&this.isHigherPriority(i,n)&&(n=i),n!==t){var s=this.items[t];this.items[t]=this.items[n],this.items[n]=s,this.heapify(n)}}},ot.peek=function(){return this.items[0].value},ot.removeAt=function(e){this.items[e]=this.items[--this.length],this.items[this.length]=t,this.heapify()},ot.dequeue=function(){var t=this.peek();return this.removeAt(0),t},ot.enqueue=function(t){var e=this.length++;this.items[e]=new a(rt.count++,t),this.percolate(e)},ot.remove=function(t){for(var e=0;e<this.length;e++)if(this.items[e].value===t)return this.removeAt(e),!0;return!1},rt.count=0;var ut,ct=w.Observer=function(){},pt=ct.create=function(t,e,i){return t||(t=D),e||(e=x),i||(i=D),new ht(t,e,i)},at=w.internals.AbstractObserver=function(t){function e(){this.isStopped=!1}return P(e,t),e.prototype.next=k,e.prototype.error=k,e.prototype.completed=k,e.prototype.onNext=function(t){!this.isStopped&&this.next(t)},e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.error(t))},e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return this.isStopped?!1:(this.isStopped=!0,this.error(t),!0)},e}(ct),ht=w.AnonymousObserver=function(t){function e(e,i,n){t.call(this),this._onNext=e,this._onError=i,this._onCompleted=n}return P(e,t),e.prototype.next=function(t){this._onNext(t)},e.prototype.error=function(t){this._onError(t)},e.prototype.completed=function(){this._onCompleted()},e}(at),ft=w.Observable=function(){function t(t,e){return function(i){var n=i.onError;return i.onError=function(e){s(e,t),n.call(i,e)},e.call(t,i)}}function e(){if(w.config.longStackSupport&&C){var e=this._subscribe,i=O(n)(new Error).e;this.stack=i.stack.substring(i.stack.indexOf("\n")+1),this._subscribe=t(this,e)}}return ut=e.prototype,e.isObservable=function(t){return t&&isFunction(t.subscribe)},ut.subscribe=ut.forEach=function(t,e,i){return this._subscribe("object"==typeof t?t:pt(t,e,i))},ut.subscribeOnNext=function(t,e){return this._subscribe(pt("undefined"!=typeof e?function(i){t.call(e,i)}:t))},ut.subscribeOnError=function(t,e){return this._subscribe(pt(null,"undefined"!=typeof e?function(i){t.call(e,i)}:t))},ut.subscribeOnCompleted=function(t,e){return this._subscribe(pt(null,null,"undefined"!=typeof e?function(){t.call(e)}:t))},e}(),lt=w.AnonymousObservable=function(t){function e(t){return t&&isFunction(t.dispose)?t:isFunction(t)?$(t):H}function i(t,i){var s=i[0],r=i[1],o=O(r.__subscribe).call(r,s);o!==T||s.fail(T.e)||n(T.e),s.setDisposable(e(o))}function s(e,i){this.source=i,this.__subscribe=e,t.call(this)}return P(s,t),s.prototype._subscribe=function(t){var e=new dt(t),n=[e,this];return tt.scheduleRequired()?tt.schedule(n,i):i(null,n),e},s}(ft),dt=(w.ObservableBase=function(t){function e(t){return t&&isFunction(t.dispose)?t:isFunction(t)?$(t):H}function i(t,i){var s=i[0],r=i[1],o=O(r.subscribeCore).call(r,s);o!==T||s.fail(T.e)||n(T.e),s.setDisposable(e(o))}function s(){t.call(this)}return P(s,t),s.prototype._subscribe=function(t){var e=new dt(t),n=[e,this];return tt.scheduleRequired()?tt.schedule(n,i):i(null,n),e},s.prototype.subscribeCore=k,s}(ft),function(t){function e(e){t.call(this),this.observer=e,this.m=new L}P(e,t);var i=e.prototype;return i.next=function(t){var e=O(this.observer.onNext).call(this.observer,t);e===T&&(this.dispose(),n(e.e))},i.error=function(t){var e=O(this.observer.onError).call(this.observer,t);this.dispose(),e===T&&n(e.e)},i.completed=function(){var t=O(this.observer.onCompleted).call(this.observer);this.dispose(),t===T&&n(t.e)},i.setDisposable=function(t){this.m.setDisposable(t)},i.getDisposable=function(){return this.m.getDisposable()},i.dispose=function(){t.prototype.dispose.call(this),this.m.dispose()},e}(at));ft.create=function(t,e){return new lt(t,e)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?(g.Rx=w,define(function(){return w})):f&&l?m?(l.exports=w).Rx=w:f.Rx=w:g.Rx=w;var vt=c()}).call(this);