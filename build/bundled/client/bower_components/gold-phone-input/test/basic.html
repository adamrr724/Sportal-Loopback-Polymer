<!DOCTYPE html><html><head>

  <title>gold-phone-input tests</title>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1,user-scalable=yes">

  <script src="../../webcomponentsjs/webcomponents-lite.js"></script>

  <script src="../../web-component-tester/browser.js"></script>

  <script src="../../iron-test-helpers/test-helpers.js"></script>
  <script src="../../iron-test-helpers/mock-interactions.js"></script>

  <link rel="import" href="../gold-phone-input.html">

</head>
<body>

  <test-fixture id="basic">
    <template>
      <gold-phone-input></gold-phone-input>
    </template>
  </test-fixture>

  <test-fixture id="required">
    <template>
      <gold-phone-input auto-validate="" required="" error-message="error"></gold-phone-input>
    </template>
  </test-fixture>

  <script>suite("basic",function(){test("input is spaced out correctly",function(){var e=fixture("basic");e.value="1231112222",assert.equal(e.value,"123-111-2222")}),test("setting the value to undefined resets it to the empty string",function(){var e=fixture("basic");e.value=void 0,assert.equal(e.value,"")}),test("invalid input is not ok",function(){var e=fixture("required");e.value="1234",forceXIfStamp(e);var t=Polymer.dom(e.root).querySelector("paper-input-container");assert.ok(t,"paper-input-container exists"),assert.isTrue(t.invalid);var r=Polymer.dom(e.root).querySelector("paper-input-error");assert.ok(r,"paper-input-error exists"),assert.notEqual(getComputedStyle(r).visibility,"hidden","error is not visibility:hidden")}),test("valid input is ok",function(){var e=fixture("required");e.value="1231112222",forceXIfStamp(e);var t=Polymer.dom(e.root).querySelector("paper-input-container");assert.ok(t,"paper-input-container exists"),assert.isFalse(t.invalid);var r=Polymer.dom(e.root).querySelector("paper-input-error");assert.ok(r,"paper-input-error exists"),assert.equal(getComputedStyle(r).visibility,"hidden","error is visibility:hidden")}),test("empty required input shows error on blur",function(){var e=fixture("required");forceXIfStamp(e);var t=Polymer.dom(e.root).querySelector("paper-input-container"),r=Polymer.dom(e.root).querySelector("paper-input-error");assert.ok(r,"paper-input-error exists"),assert.equal(getComputedStyle(r).visibility,"hidden","error is visibility:hidden"),assert.isFalse(t.invalid),MockInteractions.focus(e),MockInteractions.blur(e),assert(!e.focused,"input is blurred"),assert.notEqual(getComputedStyle(r).visibility,"hidden","error is not visibility:hidden"),assert.isTrue(t.invalid)})}),suite("a11y",function(){test("has aria-labelledby",function(){var e=fixture("basic");assert.isTrue(e.inputElement.hasAttribute("aria-labelledby")),assert.equal(e.inputElement.getAttribute("aria-labelledby"),Polymer.dom(e.root).querySelector("label").id,"aria-labelledby points to the label")}),test("required and error has aria-labelledby",function(){var e=fixture("required");assert.isTrue(e.inputElement.hasAttribute("aria-labelledby")),assert.equal(e.inputElement.getAttribute("aria-labelledby"),Polymer.dom(e.root).querySelector("label").id,"aria-labelledby points to the label")})}),suite("caret position is preserved",function(){function e(e,t,r){s.value=t,s.selectionStart=s.selectionEnd=r+1,e.value=t}function t(e,t,r){s.value=t,s.selectionStart=s.selectionEnd=r-1,e.value=t}var r,s;setup(function(){r=fixture("basic"),s=Polymer.dom(r.root).querySelector('input[is="iron-input"]')}),test("001-0: adding a character after the 1",function(){r.value="001-0";var t=3;e(r,"0012-0",t),assert.equal(r.value,"001-20"),assert.equal(s.selectionStart,t+2,"selectionStart is preserved"),assert.equal(s.selectionEnd,t+2,"selectionEnd is preserved")}),test("000-1: adding a character after the 1",function(){r.value="000-1";var t=5;e(r,"000-12",t),assert.equal(r.value,"000-12"),assert.equal(s.selectionStart,t+1,"selectionStart is preserved"),assert.equal(s.selectionEnd,t+1,"selectionEnd is preserved")}),test("000-001: adding a character after the 1",function(){r.value="000-001";var t=7;e(r,"000-0012",t),assert.equal(r.value,"000-001-2"),assert.equal(s.selectionStart,t+2,"selectionStart is preserved"),assert.equal(s.selectionEnd,t+2,"selectionEnd is preserved")}),test("000-000-0001: adding a character after the 1",function(){r.value="000-000-0001";var t=12;e(r,"000-000-00012",t),assert.equal(r.value,"00000000012"),assert.equal(s.selectionStart,t-1,"selectionStart is preserved"),assert.equal(s.selectionEnd,t-1,"selectionEnd is preserved")}),test("001-20: removing the 2",function(){r.value="001-20";var e=5;t(r,"001-0",e),assert.equal(r.value,"001-0"),assert.equal(s.selectionStart,e-1,"selectionStart is preserved"),assert.equal(s.selectionEnd,e-1,"selectionEnd is preserved")}),test("000-12: removing the 2",function(){r.value="000-12";var e=5;t(r,"000-1",e),assert.equal(r.value,"000-1"),assert.equal(s.selectionStart,e-1,"selectionStart is preserved"),assert.equal(s.selectionEnd,e-1,"selectionEnd is preserved")}),test("000-001-2: removing the 2",function(){r.value="000-001-2";var e=9;t(r,"000-001-",e),assert.equal(r.value,"000-001"),assert.equal(s.selectionStart,e-2,"selectionStart is preserved"),assert.equal(s.selectionEnd,e-2,"selectionEnd is preserved")}),test("00000000012: removing the 2",function(){r.value="00000000012";var e=11;t(r,"0000000001",e),assert.equal(r.value,"000-000-0001"),assert.equal(s.selectionStart,e+1,"selectionStart is preserved"),assert.equal(s.selectionEnd,e+1,"selectionEnd is preserved")})});</script>



</body></html>